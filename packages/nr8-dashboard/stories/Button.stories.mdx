import {
  ArgsTable,
  Title,
  Subtitle,
  Description,
  Canvas,
  Meta,
  Story,
  Source
} from '@storybook/addon-docs'

import { expect, test } from '@storybook/jest'
import { screen, userEvent, within } from '@storybook/testing-library'
import dd from 'ts-dedent'

import { Button } from '../components/buttons/button'

<Meta
  title="Fruit/Bananas/Button"
  argTypes={{
    label: {
      control: {
        type: 'select'
      },
      options: ['Primary', 'Apple', 'Banana', 'Carrot', 'Dragon'],
      table: {
        type: {
          summary: 'The label contents',
          detail: 'Text displayed by the Badge'
        },
        defaultValue: {
          summary: 'Bananas',
          defailt: 'The shit is bananananananans'
        }
      }
    },
    onClick: {
      table: {
        category: 'events'
      }
    }
  }}
  component={Button}
/>

<Title />
<Subtitle />
<Description />

<ArgsTable of={Button} />

## Primary button

Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.

- [Primary](#primary-button)
- [Secondary](#secondary-button)
- [Large](#large-button)
- [Small](#small-button)

export const someFunction = (someValue) => {
  return `i am a ${someValue}`
}

<Source
  language="css"
  code={dd`
    .container {
      display: grid | inline-grid;
    }
  `}
/>

<Canvas>
  <Story
    name="Primary"
    args={{
      primary: true,
      label: 'Bold'
    }}
    play={async ({ args, canvasElement }) => {
      const canvas = within(canvasElement)
      const button = canvas.getByRole('button')
      console.log(button)
      await userEvent.click(canvas.getByRole('button'))
      await expect(args.onClick).toHaveBeenCalled()
    }}
  >
    {(args) => {
      const { label } = args
      const functionResult = someFunction(label)
      return <Button {...args} label={functionResult} />
    }}
  </Story>
</Canvas>

<ArgsTable story="Primary" />

## Secondary button

Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede.

<Story
  name="Secondary"
  args={{
    label: 'Secondary'
  }}
>
  {(args) => <Button {...args} />}
</Story>

## Large button

Praesent dapibus, neque id cursus faucibus, tortor neque egestas auguae, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus.

<Story
  name="Large"
  args={{
    label: 'Large',
    size: 'large'
  }}
>
  {(args) => <Button {...args} />}
</Story>

## Small button

Phasellus ultrices nulla quis nibh. Quisque a lectus. Donec consectetuer ligula vulputate sem tristique cursus. Nam nulla quam, gravida non, commodo a, sodales sit amet, nisi.

<Story
  name="Small"
  args={{
    label: 'Small',
    size: 'small'
  }}
>
  {(args) => <Button {...args} />}
</Story>
